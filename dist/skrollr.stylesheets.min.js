/*! skrollr-stylesheets 0.0.6 (2014-03-30) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr-stylesheets | Free to use under terms of MIT license */
define(function(){"use strict";function a(){for(var a,b=document.body.querySelectorAll("*"),c=[],d=0,e=b.length;e>d;d++){a=b[d];for(var f=0;f<a.attributes.length;f++){var g=a.attributes[f];/data-[0-9]+/.test(g.name)&&c.push(g.name)}for(f=0;f<c.length;f++)a.removeAttribute(c[f])}}function b(a,b){for(var c,d,e,f,g,h,i,j=[],k={},l="data-"+m+"-"+b,n=0,o=a.length;o>n;n++)if(c=a[n],"1"==b.charAt(n)){j=j.concat(c.selectors);for(var p in c.animations)c.animations.hasOwnProperty(p)&&(k[p]=c.animations[p])}for(var q=0,r=j.length;r>q;q++)if(d=j[q],e=document.querySelectorAll(d[0])){h=k[d[1]];for(var s=0,t=e.length;t>s;s++){f=e[s],g=JSON.parse(f.getAttribute(l)||"{}");for(i in h)";"!=h[i].charAt(h[i].length-1)&&(h[i]+=";"),g[i]=g[i]?h[i]+g[i]:h[i];f.setAttribute(l,JSON.stringify(g))}}}function c(a){var b,c="";if(!matchMedia)return d("1",a.length);for(var e=0,f=a.length;f>e;e++)b=a[e],c=c.concat(!b.media||matchMedia(b.media).matches?"1":"0");return c}function d(a,b){var c="";if(1>b)return c;for(;b>0;)1&b&&(c+=a),b>>=1,a+=a;return c}function e(){t(!0)}var f,g,h,i=[],j=30,k="",l={},m="ss",n=/@-skrollr-keyframes\s+([\w-]+)/g,o=/\s*\{\s*((?:[^{]+\{[^}]*\}\s*)+?)\s*\}/g,p=/([\w\-]+)\s*\{([^}]+)\}/g,q=/-skrollr-animation-name\s*:\s*([\w-]+)/g,r=function(a){var b=new XMLHttpRequest;try{b.open("GET",a,!1),b.send(null)}catch(c){window.XDomainRequest&&(b=new XDomainRequest,b.open("GET",a,!1),b.send(null))}return b.responseText},s=function(a,b){h=b;for(var c=0,d=a.length;d>c;c++){var e,f=a[c];if("LINK"===f.tagName){if(null===f.getAttribute("data-skrollr-stylesheet"))continue;e=r(f.href)}else e=f.textContent||f.innerText||f.innerHTML;e&&i.push({content:e,media:f.getAttribute("media"),animations:{},selectors:[]})}i.reverse();for(var g=0;g<i.length;g++)e=i[g].content,u(e,i[g].animations),v(e,i[g].selectors);t(!1)},t=function(d){var e,m=(new Date).getTime();return d&&f&&j>m-f?(window.clearTimeout(g),void(g=window.setTimeout(t,j))):(f=m,e=c(i),void(e!==k&&(a(),l[e]||(b(i,e),l[e]=!0),w(e),h.refresh())))},u=function(a,b){n.lastIndex=0;for(var c,d,e,f;null!==(c=n.exec(a));)for(o.lastIndex=n.lastIndex,d=o.exec(a),p.lastIndex=0,f=b[c[1]]={};null!==(e=p.exec(d[1]));)f[e[1]]=e[2].replace(/[\n\r\t]/g,"")},v=function(a,b){q.lastIndex=0;for(var c,d,e;null!==(c=q.exec(a));){for(e=q.lastIndex;e--&&"{"!==a.charAt(e););for(d=e;d--&&"}"!==a.charAt(d-1););b.push([a.substring(d,e).replace(/[\n\r\t]/g,""),c[1]])}},w=function(a){for(var b,c="data-"+m+"-"+a,d=document.querySelectorAll("["+c+"]"),e=0,f=d.length;f>e;e++){b=JSON.parse(d[e].getAttribute(c))||{};for(var g in b)d[e].setAttribute("data-"+g,b[g])}};return{init:function(a){s(document.querySelectorAll("link, style"),a),window.addEventListener?window.addEventListener("resize",e,!1):window.attachEvent&&window.attachEvent("onresize",e)}}});